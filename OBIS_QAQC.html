<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>OBIS_QAQC</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="OBIS_QAQC_files/libs/clipboard/clipboard.min.js"></script>
<script src="OBIS_QAQC_files/libs/quarto-html/quarto.js"></script>
<script src="OBIS_QAQC_files/libs/quarto-html/popper.min.js"></script>
<script src="OBIS_QAQC_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="OBIS_QAQC_files/libs/quarto-html/anchor.min.js"></script>
<link href="OBIS_QAQC_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="OBIS_QAQC_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="OBIS_QAQC_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="OBIS_QAQC_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="OBIS_QAQC_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">OBIS_QAQC</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="intro" class="level2">
<h2 class="anchored" data-anchor-id="intro">Intro</h2>
<p>OBIS performs <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4309024/pdf/bau125.pdf">quality checks</a> on all of the data it receives. The following QAQC will ensure your data is prepared and has met the minimum requirements, to limit publishing errors and identify outliers or “faulty” data. Most of the following steps can be completed using <a href="https://github.com/iobis/obistools">OBIStools functions</a>. Data quality checks need to be completed for each table (event, occurrence, and eMoF), however there may be different steps for each table.</p>
</section>
<section id="install-and-load-packages" class="level2">
<h2 class="anchored" data-anchor-id="install-and-load-packages">Install and load packages</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#devtools::install_github("iobis/obistools")</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages('Hmisc')</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(devtools)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(obistools)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(Hmisc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="recommended-qaqc-steps-to-consider" class="level2">
<h2 class="anchored" data-anchor-id="recommended-qaqc-steps-to-consider">Recommended QAQC Steps to Consider</h2>
<ol type="1">
<li><p>Check that all the <a href="https://ioos.github.io/bio_mobilization_workshop/01-introduction/index.html#what-are-the-required-darwin-core-terms-for-publishing-to-obis">required Darwin Core terms</a> and OBIS fields are present and contain the correct information</p>
<ol type="1">
<li><p><code>check_fields()</code></p></li>
<li><p><a href="https://dwc.tdwg.org/terms/">Additional Darwin Core Terms</a></p></li>
</ol></li>
<li><p>Make a map from your data to ensure the coordinates are valid and within your expected range</p>
<ol type="1">
<li><p>completed in <a href="https://github.com/iobis/obistools#data-quality-report"><code>report()</code> OBIS function</a></p></li>
<li><p>You can also use <a href="https://github.com/iobis/obistools#plot-points-on-a-map"><code>plot_map()</code> or <code>plot_map_leaflet()</code></a> for occurrence records</p></li>
</ol></li>
<li><p>Run basic statistics on each column of numeric data (min, max, mean, std. dev., etc.) to identify potential issues</p>
<ol type="1">
<li><p>Some summary statistics can be found using <a href="https://github.com/iobis/obistools#data-quality-report"><code>report()</code> OBIS function</a></p></li>
<li><p>You can also use the Hmisc package with the <a href="https://rdrr.io/cran/Hmisc/man/describe.html"><code>describe()</code> function</a></p></li>
<li><p>If we have a lot of quantitative data, we can use other summary statistic functions to quality check those</p></li>
</ol></li>
<li><p>Look at unique values of columns containing string entries to identify potential issues (eg. spelling)</p></li>
<li><p>Check for uniqueness of occurrenceID field</p></li>
<li><p>Check for uniqueness of eventID for each event, if applicable</p>
<ol type="1">
<li><a href="https://github.com/iobis/obistools#check-eventid-and-parenteventid"><code>eventid &lt;- obistools::check_eventids()</code></a></li>
</ol></li>
<li><p>Check that dates are following <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO-8601</a></p></li>
<li><p>Check that the scientificNameID is/are valid</p>
<ol type="1">
<li><p>OBIS uses the <a href="https://www.marinespecies.org/">World Register of Marine Species (WoRMS)</a> as the taxonomic backbone. We need to match our species abbreviations to WoRMS naming</p></li>
<li><p><a href="https://github.com/iobis/obistools#taxon-matching"><code>obistools::match_taxa()</code></a> performs interactive taxon matching with WoRMS</p></li>
</ol></li>
</ol>
</section>
<section id="event-table-qaqc-steps" class="level2">
<h2 class="anchored" data-anchor-id="event-table-qaqc-steps">Event Table QAQC Steps</h2>
<section id="step-1-run-a-diagnosticssummary-report-for-the-data-quality" class="level3">
<h3 class="anchored" data-anchor-id="step-1-run-a-diagnosticssummary-report-for-the-data-quality">Step 1: Run a diagnostics/summary report for the data quality</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">#This will return a diagonistic report including a map of the events and general errors &amp; warnings </span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>EventReport <span class="ot">&lt;-</span> <span class="fu">report</span>(eventTable) </span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>EventReport</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co">#You can also run the Hmisc describe() function for a summary of the data</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="fu">describe</span>(eventTable)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="step-2-check-to-make-sure-eventid-are-unique" class="level3">
<h3 class="anchored" data-anchor-id="step-2-check-to-make-sure-eventid-are-unique">Step 2: Check to make sure eventID are unique</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>eventid <span class="ot">&lt;-</span> <span class="fu">check_eventids</span>(eventTable)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(eventid)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="step-3-check-for-proper-eventdate-to-ensure-they-follow-iso-8601-standards" class="level3">
<h3 class="anchored" data-anchor-id="step-3-check-for-proper-eventdate-to-ensure-they-follow-iso-8601-standards">Step 3: Check for proper eventDate to ensure they follow ISO 8601 standards</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">check_eventdate</span>(eventTable)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="occurrence-table-qaqc-steps" class="level2">
<h2 class="anchored" data-anchor-id="occurrence-table-qaqc-steps">Occurrence Table QAQC Steps</h2>
<section id="step-1-run-a-diagnosticssummary-report-for-the-data-quality-1" class="level3">
<h3 class="anchored" data-anchor-id="step-1-run-a-diagnosticssummary-report-for-the-data-quality-1">Step 1: Run a diagnostics/summary report for the data quality</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">#This will check if all OBIS required fields are present in the occurence table</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">check_fields</span>(occurrenceTable)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co">#This will return a diagonistic report including a map of the occurrences and general errors &amp; warnings</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>OccurReport <span class="ot">&lt;-</span> <span class="fu">report</span>(occurrenceTable) </span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>OccurReport</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="co">#You can also run the Hmisc describe() function for a summary of the data</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="fu">describe</span>(occurrenceTable)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="step-2-check-to-make-sure-occurrenceid-are-unique" class="level3">
<h3 class="anchored" data-anchor-id="step-2-check-to-make-sure-occurrenceid-are-unique">Step 2: Check to make sure occurrenceID are unique</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">#I think this can be completed using describe() function as well. It returns n, missing, and distinct for each column but I imagine we can select one column using $</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">describe</span>(occurrenceTable<span class="sc">$</span>occurrenceID)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="step-3-check-for-proper-eventdate-to-ensure-they-follow-iso-8601-standards-1" class="level3">
<h3 class="anchored" data-anchor-id="step-3-check-for-proper-eventdate-to-ensure-they-follow-iso-8601-standards-1">Step 3: Check for proper eventDate to ensure they follow ISO 8601 standards</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">check_eventdate</span>(occurrenceTable)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="step-4-check-that-the-scientificnameid-are-valid" class="level3">
<h3 class="anchored" data-anchor-id="step-4-check-that-the-scientificnameid-are-valid">Step 4: Check that the scientificNameID are valid</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">#OBIS uses </span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="co">#Not 100% sure on the best way to do this but heres my idea</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co">#names &lt;- some function to pull out all of the scientificNameID from our occurrence table</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="fu">match_taxa</span>(names)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="co">#this should return n names, n without matches, n with multiple matches</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="emof-table-qaqc-steps" class="level2">
<h2 class="anchored" data-anchor-id="emof-table-qaqc-steps">eMof Table QAQC Steps</h2>
<p>fill in steps here if we move forward with creating eMoF table (extended measurement or fact extension table)</p>
</section>
<section id="obis-workshop-example-code" class="level2">
<h2 class="anchored" data-anchor-id="obis-workshop-example-code">OBIS Workshop Example Code</h2>
<section id="hmiscdescribe-function" class="level3">
<h3 class="anchored" data-anchor-id="hmiscdescribe-function"><code>Hmisc::describe()</code> Function</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># pull in the occurrence file from https://www.sciencebase.gov/catalog/item/53a887f4e4b075096c60cfdd</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co">#url not working</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co">#url &lt;- "https://www.sciencebase.gov/catalog/file/get/53a887f4e4b075096c60cfdd?f=__disk__32%2F24%2F80%2F322480c9bcbad19030e29c9ec5e2caeb54cb4a08&amp;allowOpen=true"</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>occurrence <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">'53a887f4e4b075096c60cfdd.csv'</span>)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(occurrence,<span class="at">n=</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  vernacularName                                eventID occurrenceStatus
1  Alligator gar Station_95_Date_09JAN1997:14:35:00.000           Absent
     basisOfRecord       scientificName
1 HumanObservation Atractosteus spatula
                           scientificNameID  kingdom   phylum       class
1 urn:lsid:marinespecies.org:taxname:279822 Animalia Chordata Actinopteri
             order        family        genus scientificNameAuthorship
1 Lepisosteiformes Lepisosteidae Atractosteus         (Lacepède, 1803)
  taxonRank organismQuantity organismQuantityType
1   Species                0   Relative Abundance
                                                 occurrenceID
1 Station_95_Date_09JAN1997:14:35:00.000_Atractosteus_spatula
         collectionCode
1 Aransas Bay Bag Seine</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>Hmisc<span class="sc">::</span><span class="fu">describe</span>(occurrence)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>occurrence 

 18  Variables      334341  Observations
--------------------------------------------------------------------------------
vernacularName 
       n  missing distinct 
  334341        0       61 

lowest : Alligator gar        Arrow shrimp         Atlantic brief squid Atlantic bumper      Atlantic croaker    
highest: Striped mullet       Thinstripe hermit    Threadfin shad       White mullet         White shrimp        
--------------------------------------------------------------------------------
eventID 
       n  missing distinct 
  334341        0     5481 

lowest : Station_10_Date_04DEC1991:13:59:00.000 Station_10_Date_04SEP2002:13:17:00.000 Station_10_Date_05JUN1991:15:20:00.000 Station_10_Date_07APR1995:12:54:00.000 Station_10_Date_07APR2000:11:16:00.000
highest: Station_99_Date_21APR1998:18:24:00.000 Station_99_Date_22OCT2001:13:12:00.000 Station_99_Date_25JUN1990:13:48:00.000 Station_99_Date_25NOV2003:11:11:00.000 Station_99_Date_27JUN1988:12:45:00.000
--------------------------------------------------------------------------------
occurrenceStatus 
       n  missing distinct 
  334341        0        2 
                          
Value       Absent Present
Frequency   294469   39872
Proportion   0.881   0.119
--------------------------------------------------------------------------------
basisOfRecord 
               n          missing         distinct            value 
          334341                0                1 HumanObservation 
                           
Value      HumanObservation
Frequency            334341
Proportion                1
--------------------------------------------------------------------------------
scientificName 
       n  missing distinct 
  334341        0       61 

lowest : Adinia xenica               Anchoa mitchilli            Archosargus probatocephalus Ariopsis felis              Atractosteus spatula       
highest: Stomatopoda                 Stomolophus meleagris       Syngnathus scovelli         Tozeuma carolinense         Trichiurus lepturus        
--------------------------------------------------------------------------------
scientificNameID 
       n  missing distinct 
  334341        0       61 

lowest : urn:lsid:marinespecies.org:taxname:105792 urn:lsid:marinespecies.org:taxname:107034 urn:lsid:marinespecies.org:taxname:107379 urn:lsid:marinespecies.org:taxname:126983 urn:lsid:marinespecies.org:taxname:127089
highest: urn:lsid:marinespecies.org:taxname:367528 urn:lsid:marinespecies.org:taxname:396707 urn:lsid:marinespecies.org:taxname:421784 urn:lsid:marinespecies.org:taxname:422069 urn:lsid:marinespecies.org:taxname:443955
--------------------------------------------------------------------------------
kingdom 
       n  missing distinct    value 
  334341        0        1 Animalia 
                   
Value      Animalia
Frequency    334341
Proportion        1
--------------------------------------------------------------------------------
phylum 
       n  missing distinct 
  328860     5481        4 
                                                      
Value      Arthropoda   Chordata   Cnidaria   Mollusca
Frequency       71253     246645       5481       5481
Proportion      0.217      0.750      0.017      0.017
--------------------------------------------------------------------------------
class 
       n  missing distinct 
  328860     5481        5 

lowest : Actinopteri    Cephalopoda    Elasmobranchii Malacostraca   Scyphozoa     
highest: Actinopteri    Cephalopoda    Elasmobranchii Malacostraca   Scyphozoa     
                                                                      
Value         Actinopteri    Cephalopoda Elasmobranchii   Malacostraca
Frequency          235683           5481          10962          71253
Proportion          0.717          0.017          0.033          0.217
                         
Value           Scyphozoa
Frequency            5481
Proportion          0.017
--------------------------------------------------------------------------------
order 
       n  missing distinct 
  328860     5481       22 

lowest : Atheriniformes            Batrachoidiformes         Carangaria incertae sedis Carangiformes             Carcharhiniformes        
highest: Rhizostomeae              Scombriformes             Siluriformes              Syngnathiformes           Tetraodontiformes        
--------------------------------------------------------------------------------
family 
       n  missing distinct 
  328860     5481       36 

lowest : Ariidae        Atherinopsidae Batrachoididae Carangidae     Carcharhinidae
highest: Stromateidae   Syngnathidae   Tetraodontidae Trichiuridae   Triglidae     
--------------------------------------------------------------------------------
genus 
       n  missing distinct 
  328860     5481       52 

lowest : Adinia       Anchoa       Archosargus  Ariopsis     Atractosteus
highest: Sphoeroides  Stomolophus  Syngnathus   Tozeuma      Trichiurus  
--------------------------------------------------------------------------------
scientificNameAuthorship 
       n  missing distinct 
  328860     5481       52 

lowest : (Baird &amp; Girard, 1853)        (Baird &amp; Girard, 1855)        (Blainville, 1823)            (Bosc, 1801)                  (Burkenroad, 1939)           
highest: Rathbun, 1896                 Say, 1817 [in Say, 1817-1818] Shipp &amp; Yerger, 1969          Valenciennes, 1836            Winchell, 1864               
--------------------------------------------------------------------------------
taxonRank 
       n  missing distinct 
  334341        0        3 
                                  
Value        Genus   Order Species
Frequency     5481    5481  323379
Proportion   0.016   0.016   0.967
--------------------------------------------------------------------------------
organismQuantity 
       n  missing distinct     Info     Mean      Gmd      .05      .10 
  334341        0     8696    0.317  0.01639  0.03141  0.00000  0.00000 
     .25      .50      .75      .90      .95 
 0.00000  0.00000  0.00000  0.01005  0.07407 

lowest : 0.0000000000 0.0000917684 0.0001835370 0.0002136300 0.0002241650
highest: 0.9969931270 0.9974226800 0.9981570220 0.9982300880 1.0000000000
--------------------------------------------------------------------------------
organismQuantityType 
                 n            missing           distinct              value 
            334341                  0                  1 Relative Abundance 
                             
Value      Relative Abundance
Frequency              334341
Proportion                  1
--------------------------------------------------------------------------------
occurrenceID 
       n  missing distinct 
  334341        0   334341 

lowest : Station_10_Date_04DEC1991:13:59:00.000_Adinia_xenica               Station_10_Date_04DEC1991:13:59:00.000_Anchoa_mitchilli            Station_10_Date_04DEC1991:13:59:00.000_Archosargus_probatocephalus Station_10_Date_04DEC1991:13:59:00.000_Ariopsis_felis              Station_10_Date_04DEC1991:13:59:00.000_Atractosteus_spatula       
highest: Station_99_Date_27JUN1988:12:45:00.000_Stomatopoda                 Station_99_Date_27JUN1988:12:45:00.000_Stomolophus_meleagris       Station_99_Date_27JUN1988:12:45:00.000_Syngnathus_scovelli         Station_99_Date_27JUN1988:12:45:00.000_Tozeuma_carolinense         Station_99_Date_27JUN1988:12:45:00.000_Trichiurus_lepturus        
--------------------------------------------------------------------------------
collectionCode 
                    n               missing              distinct 
               334341                     0                     1 
                value 
Aransas Bay Bag Seine 
                                
Value      Aransas Bay Bag Seine
Frequency                 334341
Proportion                     1
--------------------------------------------------------------------------------</code></pre>
</div>
</div>
</section>
<section id="workshop-exercise" class="level3">
<h3 class="anchored" data-anchor-id="workshop-exercise">Workshop Exercise</h3>
<p>Code not working, <a href="https://ioos.github.io/bio_mobilization_workshop/06-qa-qc/index.html">link to workshop example</a></p>
<ol type="1">
<li><p>Run a diagnostics report for the data quality</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>trawl_fish <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">read_excel</span>(<span class="st">'trawl_fish.xlsx'</span>)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>report <span class="ot">&lt;-</span> obistools<span class="sc">::</span><span class="fu">report</span>(trawl_fish)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>report</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></li>
<li><p>Check to make sure <code>eventID</code> are unique</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>eventid <span class="ot">&lt;-</span> obistools<span class="sc">::</span><span class="fu">check_eventids</span>(trawl_fish)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(eventid)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></li>
<li><p>Check for proper <code>eventDate</code> to ensure they follow ISO 8601 standards</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>eventDate <span class="ot">&lt;-</span> obistools<span class="sc">::</span><span class="fu">check_eventdate</span>(trawl_fish)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(eventDate)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></li>
<li><p>From the report generated under exercise 1, you can already see that there's measurements made on land. This information can also be gathered by plotting the map separately or using the <code>check_onland()</code> or <code>check_depth()</code> functions in the <a href="https://iobis.github.io/obistools/">obistools</a> package.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>depth <span class="ot">&lt;-</span> obistools<span class="sc">::</span><span class="fu">check_depth</span>(trawl_fish)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>onland <span class="ot">&lt;-</span> obistools<span class="sc">::</span><span class="fu">check_onland</span>(trawl_fish) <span class="co"># Gives the same output.           </span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(depth) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></li>
</ol>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>